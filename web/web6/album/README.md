# Персональный альбом (Yii2)

## Описание
Веб-приложение "Персональный альбом" позволяет пользователям хранить, просматривать, загружать, удалять и управлять приватностью своих изображений с аутентификацией.

## Основные функции
- Аутентификация пользователей (MySQL, таблица `users`, пароли в md5)
- Просмотр личных и публичных изображений
- Загрузка изображений (jpg, png, gif, до 5МБ)
- Добавление подписи к изображению
- Удаление своих изображений
- Переключение приватности (только владелец)
- Публичные фото видны всем, приватные — только владельцу

## Страницы
- **/site/login** — форма входа
- **/register/index** — регистрация пользователя
- **/album/index** — просмотр альбома, загрузка, удаление, переключение приватности
- **/album/upload** — форма загрузки изображения
- **/album/add-caption?id=** — добавление подписи
- **/album/delete?id=** — подтверждение удаления
- **/album/publish?id=&public=** — переключение приватности (0 — личное, 1 — публичное)

## Требования
- PHP 7.2+
- MySQL (таблицы `users`, `images`)
- Каталог `upload` с правами на запись для wwwrun (или www-data)
- Настроить подключение к БД в `config/db.php`

## Структура таблиц

### Таблица users
- `id` INT PRIMARY KEY AUTO_INCREMENT
- `login` VARCHAR(16) NOT NULL UNIQUE
- `password` VARCHAR(255) NOT NULL (md5)

### Таблица images
- `id` INT PRIMARY KEY AUTO_INCREMENT
- `filename` VARCHAR(256) NOT NULL
- `caption` VARCHAR(256)
- `owner` VARCHAR(255) NOT NULL (логин владельца)
- `is_public` TINYINT(1) NOT NULL DEFAULT 0
- `created_at` DATETIME

## Запуск
1. Создайте и настройте БД (см. файл `zarpos.sql`).
2. Проверьте права на папку `album/web/upload` (должна быть доступна на запись).
3. Установите зависимости:
   ```
   composer install
   ```
4. Запустите встроенный сервер Yii:
   ```
   php yii serve
   ```
5. Откройте [http://localhost:8080](http://localhost:8080) в браузере.

## Тестирование
Тесты находятся в папке `tests` и запускаются командой:
```
vendor/bin/codecept run
```

---
Если возникнут вопросы — обратитесь к преподавателю или смотрите комментарии в коде.
